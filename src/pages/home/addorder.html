<ion-header>
	<ion-navbar color="white">
		<ion-title>{{toptitle}}</ion-title>
	</ion-navbar>
</ion-header>

<ion-content id="aboutContent">
	<div>
		<div class="topHead">
			<h3>请输入订单基本信息</h3>
			<p>请输入公司名称、完成后、点击确认按钮</p>
		</div>


		<form #ngform="ngForm" class="formBox">
			<ion-grid>
				<ion-row class="addOrder-row">
					<ion-col col-6>
						<ion-item no-lines>
							<ion-label>
								<span class="red">*</span>订单类型</ion-label>
							<ion-select required name="type" [(ngModel)]='chooseType'>
								<span *ngFor="let item of typelist">
									<ion-option [value]="item.id">
										{{item.title}}
									</ion-option>
								</span>
							</ion-select>
						</ion-item>
					</ion-col>
					<ion-col col-6>
						<ion-item no-lines>
							<ion-label>
								<span class="red">*</span>销售负责人
							</ion-label>
							<ion-select name="staff" required [(ngModel)]="salesman">
								<span *ngFor="let item of staffList">
									<ion-option [value]="item.id">
										{{item.name}}
									</ion-option>
								</span>
							</ion-select>
						</ion-item>
					</ion-col>
					<!-- <ion-col col-6>
						<ion-item no-lines>
							<ion-label>
								<span class="red">*</span>厅</ion-label>
							<ion-select name="type" [(ngModel)]="selectHotel">
								<span *ngFor="let item of hotelList">
									<ion-option [value]="item.id">
										{{item.name}}
									</ion-option>
								</span>
							</ion-select>
						</ion-item>
					</ion-col> -->
				</ion-row>

				<!-- **************************婚礼选项************************** -->
				<ion-row *ngIf="chooseType!=1">
					<!-- <ion-col col-6>
						<ion-item no-lines>
							<ion-label>
								<span class="red">*</span>订单日期</ion-label>
							<ion-datetime displayFormat="YYYY MMM DD,  HH:mm:ss" min="2016" max="2020-12-31" name="start_date" ngModel></ion-datetime>
						</ion-item>
					</ion-col> -->
					<ion-col col-6>
						<ion-item no-lines>
							<ion-label>备注</ion-label>
							<ion-input type="text" name="remark" [(ngModel)]="remark">
							</ion-input>
						</ion-item>
					</ion-col>
				</ion-row>
				<ion-row *ngIf="chooseType==9">
					<ion-col col-6>
						<ion-item no-lines>
							<ion-label>新郎姓名</ion-label>
							<ion-input type="text" name="groomeName" [(ngModel)]="groom_name">
							</ion-input>
						</ion-item>
					</ion-col>
					<ion-col col-6>
						<ion-item no-lines>
							<ion-label>新郎电话</ion-label>
							<ion-input type="tel" name="groomePhone" clearInput [(ngModel)]="groom_phone">
							</ion-input>
						</ion-item>
					</ion-col>
				</ion-row>
				<ion-row *ngIf="chooseType==9">
					<ion-col col-6>
						<ion-item no-lines>
							<ion-label>新娘姓名</ion-label>
							<ion-input type="text" name="brideName" clearInput [(ngModel)]="bride_name">
							</ion-input>
						</ion-item>
					</ion-col>
					<ion-col col-6>
						<ion-item no-lines>
							<ion-label>新娘电话</ion-label>
							<ion-input type="tel" name="bridePhone" clearInput  [(ngModel)]="bride_phone">
							</ion-input>
						</ion-item>
					</ion-col>
				</ion-row>
				<ion-row *ngIf="chooseType!=1">
					<ion-col col-6>
						<ion-item no-lines>
							<ion-label>第三联系人姓名</ion-label>
							<ion-input type="text" name="linkManName" clearInput [(ngModel)]="thirdContactName">
							</ion-input>
						</ion-item>
					</ion-col>
					<ion-col col-6>
						<ion-item no-lines>
							<ion-label>第三联系人电话</ion-label>
							<ion-input type="tel" name="linkManPhone" clearInput [(ngModel)]="thirdContactPhone">
							</ion-input>
						</ion-item>
					</ion-col>
				</ion-row>

				<!-- **************************会议选项************************** -->
				<ion-row *ngIf="chooseType==1">
					<!-- <ion-col col-6>
						<ion-item no-lines>
							<ion-label>
								<span class="red">*</span>开始时间</ion-label>
							<ion-datetime displayFormat="YYYY MMM DD, HH:mm" min="2016" max="2020-12-31" name="start_date" ngModel></ion-datetime>
						</ion-item>
					</ion-col> -->
					<!-- <ion-col col-6>
						<ion-item no-lines>
							<ion-label>
								<span class="red">*</span>结束时间</ion-label>
							<ion-datetime displayFormat="YYYY MMM DD, HH:mm" min="2016" max="2020-12-31" name="end_date" ngModel></ion-datetime>
						</ion-item>
					</ion-col> -->
				</ion-row>
				<ion-row *ngIf="chooseType==1">
					<ion-col col-6>
						<ion-item no-lines>
							<ion-label>
								<span class="red">*</span>公司名称</ion-label>
							<!--修改樣式-->

							<!--<div *ngIf="channelModalVisibel" class="newItemBox">-->
							<!--<ion-item no-lines *ngFor="let item of channelList; let i = index">-->
							<!--<ion-label (click)="seleteChannel(item)">{{item.name}}</ion-label>-->
							<!--<ion-icon item-end class="icon-red" name="trash" (click)="delChannel(item.id,i)"></ion-icon>-->
							<!--</ion-item>-->
							<!--<ion-item no-lines>-->
							<!--<ion-input type="text" name="onename" placeholder="请输入项目名称" clearInput [(ngModel)]="add_channel_name"></ion-input>-->
							<!--</ion-item>-->
							<!--<ion-row class="newPro">-->
							<!--<ion-col col-12 class="txtCenter">-->
							<!--<button color="light" ion-button (click)="addChannel()">新建</button>-->
							<!--</ion-col>-->
							<!--</ion-row>-->
							<!--</div>-->

							<ion-input type="text" required disabled tappable (click)="showCompany()" [value]="company_name">
							</ion-input>
							<!--<ion-select [(ngModel)]="selectCompany" name="company" (ngModelChange)="changeLinkMan()">-->
							<!--<ion-option [value]="item.id" *ngFor="let item of companyList" (click)='changeLinkMan()'>-->
							<!--{{item.name}}-->
							<!--</ion-option>-->
							<!--</ion-select>-->
						</ion-item>
					</ion-col>
					<ion-col col-6>
						<ion-item no-lines>
							<ion-label>
								<span class="red">*</span>联系人</ion-label>

							<ion-input type="text" required disabled tappable (click)="showContact()" [value]="contact_name">
							</ion-input>

							<!--修改样式-->
							<!--<ion-select name="linkMan" [(ngModel)]="selectLinkMan">-->
							<!--<ion-option [value]="item.id" *ngFor="let item of linkManList">-->
							<!--{{item.name}}-->
							<!--</ion-option>-->
							<!--</ion-select>-->
						</ion-item>
					</ion-col>
				</ion-row>
				<ion-row *ngIf="chooseType==1">
					<ion-col col-6>
						<ion-item no-lines>
							<ion-label class="addOrder-label">会议备注</ion-label>
							<ion-input class="addOrder-input" type="text" name="mark" [(ngModel)]="mark">
							</ion-input>
						</ion-item>
					</ion-col>
				</ion-row>

				<!--公司弹窗-->
				<div [hidden]="setCompanyVisible" class="newItemBoxTwo">
					<div class="newItemBoxTwo_div">
						<ion-item no-lines *ngFor="let item of companyList; let i = index">
							<ion-label tappable (click)="selectCompanyFun(item)">{{item?.name}}</ion-label>
							<ion-icon item-end class="icon icon-red trash-red" name="trash" tappable (click)="delCompany(item.id,i)"></ion-icon>
						</ion-item>
					</div>

					<ion-item>
						<ion-label>公司名称</ion-label>
						<ion-input type="text" name="onename" placeholder="请输入公司名称" [(ngModel)]="add_company_name"></ion-input>
					</ion-item>
					<ion-row class="newPro">
						<ion-col col-12 class="txtCenter">
							<button color="light" ion-button (click)="addCompany()">新建</button>
						</ion-col>
					</ion-row>
				</div>

				<!-- 联系人弹窗 -->
				<div [hidden]="setContactVisible" class="newItemBox">
					<div class="newItemBox_div">
						<ion-item no-lines *ngFor="let item of contactList; let i = index">
							<ion-label tappable (click)="selectContact(item)">{{item?.name}}</ion-label>
							<ion-icon item-end class="icon-red trash-red" name="trash" tappable (click)="delContact(item.linkman_id,i)"></ion-icon>
						</ion-item>
					</div>
					<ion-item>
						<ion-label>联系人姓名</ion-label>
						<ion-input type="text" name="onename" placeholder="请输入联系人姓名" [(ngModel)]="add_contact_name"></ion-input>
					</ion-item>
					<ion-item>
						<ion-label>联系人电话</ion-label>
						<ion-input type="text" name="onephone" placeholder="请输入联系人电话" [(ngModel)]="add_contact_phone"></ion-input>

					</ion-item>
					<ion-row class="newPro">
						<ion-col col-12 class="txtCenter">
							<button color="light" ion-button (click)="addContactFun()">新建</button>
						</ion-col>
					</ion-row>
				</div>


				<!-- 详细信息表格 -->
				<h3 style="text-align: right;">
					<button color="light" ion-button (click)="addTableItem()">添加档期</button>
				</h3>
				<ion-row class="fixTable">
					<ion-col>
						<table class="clientTable finaTable f-table">
							<tr>
								<td style="width:20%;"><span class="red">*</span>厅</td>
								<td style="width:20%"><span class="red">*</span>类型</td>
								<td style="width:20%"><span class="red">*</span>开始时间</td>
								<td style="width:20%"><span class="red">*</span>结束时间</td>
								<td style="width:20%">操作</td>
							</tr>
						</table>

						<div class="">
							<table class="clientTable finaTable">
								<tr *ngFor="let item of datelists;let i = index">
									<td style="width:20%">
										<ion-item no-lines>
											<ion-select required name="{{'hallItem'+i}}" [(ngModel)]="datelists[i].hall_id">
												<span *ngFor="let value of hallList">
													<ion-option [value]="value.id">
														{{value.name}}
													</ion-option>
												</span>
											</ion-select>
										</ion-item>
									</td>
									<td style="width:20%">
										<ion-item no-lines>
											<ion-select required name="{{'typeItem'+i}}" [(ngModel)]='datelists[i].type'>
												<span *ngFor="let value of schedule_type">
													<ion-option [value]="value.id">
														{{value.name}}
													</ion-option>
												</span>
											</ion-select>
										</ion-item>
									</td>
									<td style="width:20%">
										<ion-item no-lines>
											<ion-datetime required displayFormat="YYYY MMM DD,  HH:mm:ss" name="{{'start_time'+i}}" [(ngModel)]='datelists[i].start_time'></ion-datetime>
										</ion-item>
									</td>
									<td style="width:20%">
										<ion-item no-lines>
											<ion-datetime required displayFormat="YYYY MMM DD,  HH:mm:ss" name="{{'end_time'+i}}" [(ngModel)]='datelists[i].end_time'></ion-datetime>
										</ion-item>
									</td>
									<td style="width:20%">
										<button ion-button color="light" small class="blckBtn" (click)="clearTableItem(i)">
											清空
										</button>
										<button ion-button color="light" small class="blckBtn" (click)="delTableItem(i)">
											删除
										</button>
									</td>
								</tr>
							</table>
						</div>
					</ion-col>
				</ion-row>

				<ion-row class="subRow">
					<ion-col col-6 class="txtR">
						<button ion-button class="blckBtn" [disabled]="!ngform.valid" (click)="formSubmit(ngform.value)">
							确定
						</button>
					</ion-col>
					<ion-col col-6>
						<button ion-button color="light" navPop>返回</button>
					</ion-col>
				</ion-row>
			</ion-grid>
		</form>

	</div>
	<!--遮盖层-->
	<div *ngIf="setDropVisible" class="backdrop-div" (click)="backdropclick($event)" ontouchmove="event.preventDefault();event.stopPropagation();">
		<ion-backdrop disable-activated role="presentation" tappable style="opacity:0.1;transition-delay: initial; transition-property: none;"></ion-backdrop>
	</div>
</ion-content>